<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="myStyles.css"/>
    </head>
    <body class="body-div">
        <div class="onboarding-header center-flex">
            <button class="onboarding-header-back-button-div center-flex" onclick="navigateToPrevious()">
                <img
                    src="Back-Chevron-Icon.svg"
                    alt='Back Chevron Icon' 
                    class="onboarding-header-back-chevron-icon"  
                />
            </button>
            <div class="onboarding-header-progress-container center-flex">             
                <div class="onboarding-header-progress-outer-div">
                    <div class="onboarding-header-progress-inner-div" style="width: 100%"></div>
                </div>
            </div>
        </div>
        
        <div class="onboarding-body-div">
            <div class="onboarding-body-upper-div">
                <h1 class="onboarding-heading-text">How <span class="keenspan">Keen</span> are you today?</h1>
                <p class="onboarding-info-text">Let us know about your current mood</p>
            </div>
            
            <div class="onboarding-body-middle-div">
                <p class="flag-text"></p>
                
                <button class="onboarding-select-button howkeenselectbutton" onclick="toggleSelection(this, 1)">
                    <img src="Grey-Circle-Icon.svg" alt="Grey Radio Icon" class="selectButtonRadio"/>
                    <span>
                        <p className="howkeenselectbuttonheadingtext">ðŸ˜Œ Chill</p>
                        <p className="howkeenselectbuttoninfotext">For a laid-back, relaxing day</p>
                    </span>
                </button>
                
                <button class="onboarding-select-button howkeenselectbutton" onclick="toggleSelection(this, 2)">
                    <img src="Grey-Circle-Icon.svg" alt="Grey Radio Icon" class="selectButtonRadio"/>
                    <span>
                        <p className="howkeenselectbuttonheadingtext">ðŸ™‚ Balanced</p>
                        <p className="howkeenselectbuttoninfotext">A mix of relaxation and adventure</p>
                    </span>
                </button>
                
                <button class="onboarding-select-button howkeenselectbutton" onclick="toggleSelection(this, 3)">
                    <img src="Grey-Circle-Icon.svg" alt="Grey Radio Icon" class="selectButtonRadio"/>
                    <span>
                        <p className="howkeenselectbuttonheadingtext">ðŸ¤ª Thrilled</p>
                        <p className="howkeenselectbuttoninfotext">Adrenaline-packed day full of activity</p>
                    </span>
                </button> 
            </div>  

            <div class="onboarding-body-lower-div">
                <button class="onboarding-action-button center-flex" onclick="register()">
                    Next
                    <img src="Forward-Arrow-Icon.svg" alt="Forward Arrow Icon" className="onboarding-action-button-forward-arrow-icon" style="margin-left: 5px"/>
                </button>
            </div>
        </div>
        
        <script>
            let how_keen;
            function navigateToPrevious() {
                window.location.href = 'location.html';
            }
            function register() {
                if(how_keen !== undefined) {
                    const email = localStorage.getItem('email');
                    window.location.href = "register.jsp?email=" + encodeURIComponent(email);
                } else {
                    document.querySelector('.flag-text').textContent = 'How keen selection is required';
                }
            }
            function toggleSelection(button, number) {
                const selectButtons = document.querySelectorAll('.onboarding-select-button');
                
                selectButtons.forEach(otherButton => {
                  otherButton.classList.remove('checked');
                  otherButton.querySelector('.selectButtonRadio').src = 'Grey-Circle-Icon.svg';
                  otherButton.style.backgroundColor = 'transparent';
                });
                
                button.classList.add('checked');
                button.querySelector('.selectButtonRadio').src = 'Radio.svg';
                button.style.backgroundColor = 'rgba(218, 245, 254, 1)'; 
                
                if(number === 1) {
                    how_keen = 'Chill';
                    localStorage.setItem('how-keen', how_keen);
                } else if(number === 2) {
                    how_keen = 'Balanced';
                    localStorage.setItem('how-keen', how_keen);
                } else if(number === 3) {
                    how_keen = 'Thrilled';
                    localStorage.setItem('how-keen', how_keen);
                }
            }
        </script>
    </body>
</html>
